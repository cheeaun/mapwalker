var F=Object.defineProperty,X=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var G=(e,t,r)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))Y.call(t,r)&&G(e,r,t[r]);if(I)for(var r of I(t))W.call(t,r)&&G(e,r,t[r]);return e},H=(e,t)=>X(e,q(t));import{j as Z,a as _,F as $,s as O,l as y,y as R,A as ee,M as V,b as te,N as oe,G as ne,S as D,L as w,c as L,u as M,d as re,e as ie}from"./vendor.ae71023e.js";const ae=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))m(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const A of c.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&m(A)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}};ae();const{VITE_ORS_API_KEY:ce,VITE_GRAPHHOPPER_API_KEY:le}={VITE_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiY2hlZWF1biIsImEiOiJjbDBkdXJud3gwY21qM2Rtenk1ZTM4dzNqIn0.lIVOhBl1NrdplE6DrbEngw",VITE_ORS_API_KEY:"5b3ce3597851110001cf624888ac0dd0f3434a208374935e71ad9bcd",VITE_GRAPHHOPPER_API_KEY:"LijBPDQGfu7Iiq80w3HzwB4RUDJbMbhs6BU0dEnn",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},T={OSM_DE:(e,t)=>`https://routing.openstreetmap.de/routed-foot/route/v1/driving/${e.join(",")};${t.join(",")}`,ORS:()=>"https://api.openrouteservice.org/v2/directions/foot-hiking/geojson",GHOP:()=>"https://graphhopper.com/api/1/route"},se=async(e,t,r)=>{var S,p,v;const m=fetch(T.OSM_DE(e,t)+"?"+new URLSearchParams(z({geometries:"geojson",overview:"full",continue_straight:!1},r))).then(s=>s.json()).catch(s=>{}),i=fetch(T.ORS(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:ce},body:JSON.stringify({coordinates:[e,t],instructions:!1})}).then(s=>s.json()).catch(s=>{}),c=new URLSearchParams({vehicle:"foot",key:le,instructions:!0,points_encoded:!1,point:[...e].reverse().join(",")});c.append("point",[...t].reverse().join(","));const A=fetch(T.GHOP()+"?"+c).then(s=>s.json()).catch(s=>{}),[E,g,P]=await Promise.all([m,i,A]);return console.log({response1:E,response2:g,response3:P}),{type:"FeatureCollection",features:[{type:"Feature",geometry:(S=E==null?void 0:E.routes[0])==null?void 0:S.geometry,properties:{index:0,provider:"osm-de"}},{type:"Feature",geometry:(p=g==null?void 0:g.features[0])==null?void 0:p.geometry,properties:{index:1,provider:"ors"}},{type:"Feature",geometry:(v=P==null?void 0:P.paths[0])==null?void 0:v.points,properties:{index:2,provider:"graphhopper"}}]}},b="mapwalker-";var h={get:e=>{try{return JSON.parse(localStorage.getItem(b+e))}catch{return null}},set:(e,t)=>{try{t?localStorage.setItem(b+e,JSON.stringify(t)):localStorage.removeItem(b+e)}catch{}},del:e=>{try{localStorage.removeItem(b+e)}catch{}}},U="data:image/png;base64,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",N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAS1BMVEVHcEz////////////////////////////////r9fx0wOw9puUOkN8xn+OTzfDY7fklmuI4pOQZld+UzfB0vuz///83pOT///91vuyKtLkHAAAAGXRSTlMAMGunv5t3GAzD3+//89fH9/H7199s8XjfKy/6XAAAAIpJREFUeAFlj4WBgDAMAEM5oJLitv+kX3u/ajyRTGd6GMZJKtbQMLbIA84H1TjDkDWGZdXCumBEJkjyum17uh2djByqwSdS2MklA1F3X1g10AuoblVxq8J/RU/QtSp2jQxycX4nPXikw62q+7bl4pDav342dtXWOWIKex1DHeaicVmpTM8A/dVJ4gNfKwijr/kcwwAAAABJRU5ErkJggg==",J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAV1BMVEVHcEz////////////////////////////////////////46vj46vfz1fDz1e/djtXdjdXTbcnTbMnCM7TCM7PALLC/LLC9Ja+9Ja66GKq6GKm2DKWzAKGsmQwTAAAAHHRSTlMADBgwa2x3eJunv8PDx8fX19/f7+/x8fPz9/f7XCOcjAAAAJJJREFUeAEFwQFu3DAMADBKsu+uQLH/P7TY0jiWRwZUzND9NIKoF+DeR4h3xiu/rGvp3zNU1ndhzv2jnsq3P6XXzsh5V9fM+XHd3atH9j6ZPs6GvZWRabqBx0ckAEAelwG8PDofWyVkuJzRVufXuY3St1VHPjNijNQ/vXY5da4d5d/6u3sJYkzAeo6AnJHO0xv/AX/8TAjqcSv9AAAAAElFTkSuQmCC",x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAV1BMVEVHcEzuSnH////72+L////////////zfpn////sM17rKFbuRWv////////////1m7DuPmfuS3HuRGv87PD97PDzfpruRGzzfZn////////1m6/tPmfrHk4InpgzAAAAHHRSTlMA72vHDJts37/3+/EYMKfX8+/xw8Pf8d93eNfz3D4s5QAAAI9JREFUeF5ljssWgjAUA28LLekTEBDQ/P93yqUuPMfZzWwSUYqtgDuyNHqLL7a/3WHZDTmNgNNi0QXehA5WJAOXh5QiGVYUOfAi5+FiJnd4cZgYh5tAgyoA+WjhSQL/ocIwtBD5hhOPjTTqhhxxSsEayJiSjgNZxP8e8+06xok026LXtXh88epKPh1QfVH5APz1C0cNUS3tAAAAAElFTkSuQmCC";const n=Z,k=_,Q=$,{VITE_MAPBOX_ACCESS_TOKEN:j,DEV:de}={VITE_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiY2hlZWF1biIsImEiOiJjbDBkdXJud3gwY21qM2Rtenk1ZTM4dzNqIn0.lIVOhBl1NrdplE6DrbEngw",VITE_ORS_API_KEY:"5b3ce3597851110001cf624888ac0dd0f3434a208374935e71ad9bcd",VITE_GRAPHHOPPER_API_KEY:"LijBPDQGfu7Iiq80w3HzwB4RUDJbMbhs6BU0dEnn",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},ue=2;function Ae(e){return M(()=>new re(e),{position:e.position}),null}class ge{onAdd(t){return this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-legend",this._container.innerHTML=`
      <h2>Map Legend</h2>
      <dl>
        <dt><span class="path" /></dt>
        <dd>Foot/cycling paths</dd>
        <dt><span class="bridge" /></dt>
        <dd>Bridges</dd>
        <dt><span class="stairs" /></dt>
        <dd>Stairs</dd>
        <dt><span class="tunnel" /></dt>
        <dd>Tunnel/underground/under bridge</dd>
        <dt><img src="${N}" width="10" height="10" /></dt>
        <dd>Route from OSM</dd>
        <dt><img src="${J}" width="10" height="10" /></dt>
        <dd>Route from ORS</dd>
        <dt><img src="${x}" width="10" height="10" /></dt>
        <dd>Route from GraphHopper</dd>
      </dl>
    `,t.on("zoomend",r=>{const{zoom:m}=r.viewState,i=m<16;this._container.hidden=!i}),this._container}onRemove(){this._container.remove()}}function pe(e){M(()=>new ge,{position:e.position})}const B={type:"FeatureCollection",features:[]};function me(){const e=O(),t=O(),r=O(),[m,i]=y(!1),c=O(),[A,E]=y(B),[g,P]=y(h.get("walk-route")||null);R(()=>{h.set("walk-route",g)},[g]);const[a,S]=y(h.get("destination-marker")||null);R(()=>{h.set("destination-marker",a)},[a]);const[p,v]=y(h.get("marker-pinned")||!1);R(()=>{h.set("marker-pinned",p)},[p]);const s={walkRoute:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["case",["==",["get","provider"],"ors"],"#95378C",["==",["get","provider"],"graphhopper"],"#EB1E4E","#0E90DF"],"line-opacity":["interpolate",["linear"],["zoom"],15,1,18,.5],"line-width":["interpolate",["linear"],["zoom"],15,4,18,14],"line-dasharray":[0,2]}},walkRoute2:{layout:{"symbol-placement":"line","symbol-spacing":1,"icon-ignore-placement":!0,"icon-size":["interpolate",["linear"],["zoom"],15,.5,18,.75],"icon-padding":0,"icon-image":["case",["==",["get","provider"],"ors"],"walk-dot-purple",["==",["get","provider"],"graphhopper"],"walk-dot-red","walk-dot-blue"]}}},f=O(!1),K=ee(o=>{if(f.current&&!p){const{lngLat:l}=o;S(l)}},350),C=O(!1);return k(Q,{children:[n("div",{id:"map",children:k(V,{ref:e,mapboxAccessToken:j,mapStyle:`mapbox://styles/cheeaun/cl0ds1jbz003014px6nthvdle${de?"/draft":""}`,initialViewState:h.get("view-state")||{center:[103.8198,1.3521]},boxZoom:!1,renderWorldCopies:!1,maxZoom:21,attributionControl:!1,logoPosition:"top-right",onLoad:o=>{var l;(l=c.current)==null||l.trigger(),e.current.loadImage(N,(d,u)=>{d||(e.current.addImage("walk-dot-blue",u),r.current.addImage("walk-dot-blue",u))}),e.current.loadImage(J,(d,u)=>{d||(e.current.addImage("walk-dot-purple",u),r.current.addImage("walk-dot-purple",u))}),e.current.loadImage(x,(d,u)=>{d||(e.current.addImage("walk-dot-red",u),r.current.addImage("walk-dot-red",u))})},onMoveStart:o=>{o.geolocateSource||t.current.hidden||t.current.classList.add("faded")},onMoveEnd:o=>{o.geolocateSource||t.current.hidden||(t.current.classList.remove("faded"),h.set("view-state",o.viewState))},onMove:o=>{var u;const{viewState:l}=o,d=l.zoom<16;t.current.hidden=d,d||(u=r.current)==null||u.jumpTo(H(z({},l),{center:[l.longitude,l.latitude],zoom:l.zoom-ue}))},onClick:o=>{console.log("map click",o),!(o.originalEvent.detail>1)&&(f.current=!0,K(o))},onDblClick:o=>{f.current&&(f.current=!1)},onZoomStart:o=>{f.current&&(f.current=!1)},onDragStart:o=>{f.current&&(f.current=!1)},children:[n(te,{position:"top-right",compact:!0}),n(Ae,{accessToken:j,marker:!1,clearAndBlurOnSelect:!0,collapsed:!0,position:"top-left"}),n(pe,{position:"bottom-left"}),n(oe,{visualizePitch:!0,position:"top-right"}),n(ne,{ref:c,fitBoundsOptions:{zoom:17},positionOptions:{enableHighAccuracy:!0,timeout:3e3},trackUserLocation:!0,showUserHeading:!0,position:"top-right",onGeolocate:o=>{console.log({onGeolocate:o});const{coords:l}=o;E({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[l.longitude,l.latitude]}}]}),window.DeviceOrientationEvent&&!C.current&&typeof DeviceOrientationEvent.requestPermission=="function"&&DeviceOrientationEvent.requestPermission().then(function(d){d==="granted"&&(console.log("granted"),C.current=!0)}).catch(d=>{})}}),n(D,{id:"walk-route",type:"geojson",data:g||B,children:n(w,z({id:"walk-route",type:"symbol"},s.walkRoute2))}),n(L,{anchor:"bottom",draggable:!p,longitude:(a==null?void 0:a.lng)||0,latitude:(a==null?void 0:a.lat)||0,onDragEnd:o=>{const{lngLat:l}=o;S(l)},children:n("img",{src:U,width:"18",hidden:!a})})]})}),n("div",{id:"overview-map",ref:t,hidden:!0,children:k(V,{ref:r,mapboxAccessToken:j,mapStyle:"mapbox://styles/cheeaun/cl0ds1jbz003014px6nthvdle/draft",initialViewState:{center:[103.8198,1.3521],zoom:11},attributionControl:!1,interactive:!1,maxZoom:16,minZoom:14.5,children:[n(D,{id:"walk-route",type:"geojson",data:g||B,children:n(w,z({id:"walk-route",type:"symbol"},s.walkRoute2))}),k(D,{id:"geolocation",type:"geojson",data:A,children:[n(w,{id:"geolocation-outer",type:"circle",paint:{"circle-radius":12,"circle-color":"#1ea1f1","circle-opacity":.3}}),n(w,{id:"geolocation-inner",type:"circle",paint:{"circle-radius":3,"circle-color":"#1ea1f1","circle-stroke-width":2,"circle-stroke-color":"#fff"}})]}),n(L,{anchor:"bottom",longitude:(a==null?void 0:a.lng)||0,latitude:(a==null?void 0:a.lat)||0,children:n("img",{src:U,width:"10",hidden:!a})})]})}),k("div",{id:"actions",class:m?"disabled":"",children:[m&&n("div",{class:"loading"}),a?k(Q,{children:[n("button",{type:"button",onClick:()=>{S(null),v(!1)},title:"Remove marker",children:"\u274C"}),n("button",{type:"button",onClick:()=>{v(!p)},class:p?"":"faded",title:p?"Unpin marker":"Pin marker",children:"\u{1F4CC}"}),n("button",{type:"button",onClick:()=>{var o;(o=e.current)==null||o.flyTo({center:a})},title:"Fly to marker",children:"\u{1F50D}"}),n("button",{type:"button",onClick:async()=>{if(i(!0),console.log({geolocationGeoJSON:A,destinationMarker:a}),!A){alert("Please allow location access to generate routes");return}const o=await se(A.features[0].geometry.coordinates,[a.lng,a.lat]);P(o),i(!1),v(!0)},title:"Generate routes to marker",children:"\u{1F503}"})]}):!!g&&n("button",{type:"button",onClick:()=>{P(null)},title:"Clear route",children:"\u{1F5D1}\uFE0F"})]})]})}ie(n(me,{}),document.getElementById("app"));
