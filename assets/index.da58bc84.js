var X=Object.defineProperty,q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var V=(e,o,r)=>o in e?X(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,y=(e,o)=>{for(var r in o||(o={}))W.call(o,r)&&V(e,r,o[r]);if(H)for(var r of H(o))Z.call(o,r)&&V(e,r,o[r]);return e},L=(e,o)=>q(e,Y(o));import{j as _,a as $,F as ee,s as v,l as w,y as j,A as te,M as U,b as oe,N as ne,G as re,S as B,L as R,c as Q,u as J,d as ie,e as ae}from"./vendor.ae71023e.js";const ce=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function f(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}};ce();const{VITE_ORS_API_KEY:le,VITE_GRAPHHOPPER_API_KEY:se}={VITE_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiY2hlZWF1biIsImEiOiJjbDBkdXJud3gwY21qM2Rtenk1ZTM4dzNqIn0.lIVOhBl1NrdplE6DrbEngw",VITE_ORS_API_KEY:"5b3ce3597851110001cf624888ac0dd0f3434a208374935e71ad9bcd",VITE_GRAPHHOPPER_API_KEY:"LijBPDQGfu7Iiq80w3HzwB4RUDJbMbhs6BU0dEnn",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},C={OSM_DE:(e,o)=>`https://routing.openstreetmap.de/routed-foot/route/v1/driving/${e.join(",")};${o.join(",")}`,ORS:()=>"https://api.openrouteservice.org/v2/directions/foot-hiking/geojson",GHOP:()=>"https://graphhopper.com/api/1/route"},de=async(e,o,r)=>{var E,p,S,k,d,T,b,z;const f=fetch(C.OSM_DE(e,o)+"?"+new URLSearchParams(y({geometries:"geojson",overview:"full",continue_straight:!1},r))).then(t=>t.json()).catch(t=>{}),i=fetch(C.ORS(),{method:"POST",headers:{"Content-Type":"application/json",Authorization:le},body:JSON.stringify({coordinates:[e,o],instructions:!1})}).then(t=>t.json()).catch(t=>{}),c=new URLSearchParams({vehicle:"foot",key:se,instructions:!0,points_encoded:!1,point:[...e].reverse().join(",")});c.append("point",[...o].reverse().join(","));const g=fetch(C.GHOP()+"?"+c).then(t=>t.json()).catch(t=>{}),[h,s,m]=await Promise.all([f,i,g]);return console.log({response1:h,response2:s,response3:m}),{type:"FeatureCollection",features:[{type:"Feature",geometry:(E=h==null?void 0:h.routes[0])==null?void 0:E.geometry,properties:{index:0,provider:"osm-de",distance:(p=h==null?void 0:h.routes[0])==null?void 0:p.distance}},{type:"Feature",geometry:(S=s==null?void 0:s.features[0])==null?void 0:S.geometry,properties:{index:1,provider:"ors",distance:(T=(d=(k=s==null?void 0:s.features[0])==null?void 0:k.properties)==null?void 0:d.summary)==null?void 0:T.distance}},{type:"Feature",geometry:(b=m==null?void 0:m.paths[0])==null?void 0:b.points,properties:{index:2,provider:"graphhopper",distance:(z=m==null?void 0:m.paths[0])==null?void 0:z.distance}}]}},D="mapwalker-";var P={get:e=>{try{return JSON.parse(localStorage.getItem(D+e))}catch{return null}},set:(e,o)=>{try{o?localStorage.setItem(D+e,JSON.stringify(o)):localStorage.removeItem(D+e)}catch{}},del:e=>{try{localStorage.removeItem(D+e)}catch{}}},M="data:image/png;base64,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",x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAS1BMVEVHcEz////////////////////////////////r9fx0wOw9puUOkN8xn+OTzfDY7fklmuI4pOQZld+UzfB0vuz///83pOT///91vuyKtLkHAAAAGXRSTlMAMGunv5t3GAzD3+//89fH9/H7199s8XjfKy/6XAAAAIpJREFUeAFlj4WBgDAMAEM5oJLitv+kX3u/ajyRTGd6GMZJKtbQMLbIA84H1TjDkDWGZdXCumBEJkjyum17uh2djByqwSdS2MklA1F3X1g10AuoblVxq8J/RU/QtSp2jQxycX4nPXikw62q+7bl4pDav342dtXWOWIKex1DHeaicVmpTM8A/dVJ4gNfKwijr/kcwwAAAABJRU5ErkJggg==",K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAV1BMVEVHcEz////////////////////////////////////////46vj46vfz1fDz1e/djtXdjdXTbcnTbMnCM7TCM7PALLC/LLC9Ja+9Ja66GKq6GKm2DKWzAKGsmQwTAAAAHHRSTlMADBgwa2x3eJunv8PDx8fX19/f7+/x8fPz9/f7XCOcjAAAAJJJREFUeAEFwQFu3DAMADBKsu+uQLH/P7TY0jiWRwZUzND9NIKoF+DeR4h3xiu/rGvp3zNU1ndhzv2jnsq3P6XXzsh5V9fM+XHd3atH9j6ZPs6GvZWRabqBx0ckAEAelwG8PDofWyVkuJzRVufXuY3St1VHPjNijNQ/vXY5da4d5d/6u3sJYkzAeo6AnJHO0xv/AX/8TAjqcSv9AAAAAElFTkSuQmCC",F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAV1BMVEVHcEzuSnH////72+L////////////zfpn////sM17rKFbuRWv////////////1m7DuPmfuS3HuRGv87PD97PDzfpruRGzzfZn////////1m6/tPmfrHk4InpgzAAAAHHRSTlMA72vHDJts37/3+/EYMKfX8+/xw8Pf8d93eNfz3D4s5QAAAI9JREFUeF5ljssWgjAUA28LLekTEBDQ/P93yqUuPMfZzWwSUYqtgDuyNHqLL7a/3WHZDTmNgNNi0QXehA5WJAOXh5QiGVYUOfAi5+FiJnd4cZgYh5tAgyoA+WjhSQL/ocIwtBD5hhOPjTTqhhxxSsEayJiSjgNZxP8e8+06xok026LXtXh88epKPh1QfVH5APz1C0cNUS3tAAAAAElFTkSuQmCC";const n=_,O=$,N=ee,{VITE_MAPBOX_ACCESS_TOKEN:I,DEV:ue}={VITE_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiY2hlZWF1biIsImEiOiJjbDBkdXJud3gwY21qM2Rtenk1ZTM4dzNqIn0.lIVOhBl1NrdplE6DrbEngw",VITE_ORS_API_KEY:"5b3ce3597851110001cf624888ac0dd0f3434a208374935e71ad9bcd",VITE_GRAPHHOPPER_API_KEY:"LijBPDQGfu7Iiq80w3HzwB4RUDJbMbhs6BU0dEnn",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},Ae=2;function ge(e){return J(()=>new ie(e),{position:e.position}),null}class me{onAdd(o){return this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-legend",this._container.innerHTML=`
      <h2>Map Legend</h2>
      <dl>
        <dt><span class="path" /></dt>
        <dd>Foot/cycling paths</dd>
        <dt><span class="bridge" /></dt>
        <dd>Bridges</dd>
        <dt><span class="stairs" /></dt>
        <dd>Stairs</dd>
        <dt><span class="tunnel" /></dt>
        <dd>Tunnel/underground/under bridge</dd>
        <dt><img src="${x}" width="10" height="10" /></dt>
        <dd>Route from OSM</dd>
        <dt><img src="${K}" width="10" height="10" /></dt>
        <dd>Route from ORS</dd>
        <dt><img src="${F}" width="10" height="10" /></dt>
        <dd>Route from GraphHopper</dd>
      </dl>
    `,o.on("zoomend",r=>{const{zoom:f}=r.viewState,i=f<16;this._container.hidden=!i}),this._container}onRemove(){this._container.remove()}}function pe(e){J(()=>new me,{position:e.position})}const G={type:"FeatureCollection",features:[]};function fe(){const e=v(),o=v(),r=v(),[f,i]=w(!1),c=v(),[g,h]=w(G),[s,m]=w(P.get("walk-route")||null);j(()=>{P.set("walk-route",s)},[s]);const[a,E]=w(P.get("destination-marker")||null);j(()=>{P.set("destination-marker",a)},[a]);const[p,S]=w(P.get("marker-pinned")||!1);j(()=>{P.set("marker-pinned",p)},[p]);const k={walkRoute:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["case",["==",["get","provider"],"ors"],"#95378C",["==",["get","provider"],"graphhopper"],"#EB1E4E","#0E90DF"],"line-opacity":["interpolate",["linear"],["zoom"],15,1,18,.5],"line-width":["interpolate",["linear"],["zoom"],15,4,18,14],"line-dasharray":[0,2]}},walkRoute2:{layout:{"symbol-placement":"line","symbol-spacing":1,"icon-ignore-placement":!0,"icon-size":["interpolate",["linear"],["zoom"],15,.5,18,.75],"icon-padding":0,"icon-image":["case",["==",["get","provider"],"ors"],"walk-dot-purple",["==",["get","provider"],"graphhopper"],"walk-dot-red","walk-dot-blue"]}}},d=v(!1),b=te(t=>{if(d.current&&!p){const{lngLat:l}=t;E(l)}},350),z=v(!1);return O(N,{children:[n("div",{id:"map",children:O(U,{ref:e,mapboxAccessToken:I,mapStyle:`mapbox://styles/cheeaun/cl0ds1jbz003014px6nthvdle${ue?"/draft":""}`,initialViewState:P.get("view-state")||{center:[103.8198,1.3521]},boxZoom:!1,renderWorldCopies:!1,maxZoom:21,attributionControl:!1,logoPosition:"top-right",onLoad:t=>{var l;(l=c.current)==null||l.trigger(),e.current.loadImage(x,(u,A)=>{u||(e.current.addImage("walk-dot-blue",A),r.current.addImage("walk-dot-blue",A))}),e.current.loadImage(K,(u,A)=>{u||(e.current.addImage("walk-dot-purple",A),r.current.addImage("walk-dot-purple",A))}),e.current.loadImage(F,(u,A)=>{u||(e.current.addImage("walk-dot-red",A),r.current.addImage("walk-dot-red",A))})},onMoveStart:t=>{t.geolocateSource||o.current.hidden||o.current.classList.add("faded")},onMoveEnd:t=>{t.geolocateSource||o.current.hidden||(o.current.classList.remove("faded"),P.set("view-state",t.viewState))},onMove:t=>{var A;const{viewState:l}=t,u=l.zoom<16;o.current.hidden=u,u||(A=r.current)==null||A.jumpTo(L(y({},l),{center:[l.longitude,l.latitude],zoom:l.zoom-Ae}))},onClick:t=>{console.log("map click",t),!(t.originalEvent.detail>1)&&(d.current=!0,b(t))},onDblClick:t=>{d.current&&(d.current=!1)},onZoomStart:t=>{d.current&&(d.current=!1)},onDragStart:t=>{d.current&&(d.current=!1)},children:[n(oe,{position:"top-right",compact:!0}),n(ge,{accessToken:I,marker:!1,clearAndBlurOnSelect:!0,collapsed:!0,position:"top-left"}),n(pe,{position:"bottom-left"}),n(ne,{visualizePitch:!0,position:"top-right"}),n(re,{ref:c,fitBoundsOptions:{zoom:17},positionOptions:{enableHighAccuracy:!0,timeout:3e3},trackUserLocation:!0,showUserHeading:!0,position:"top-right",onGeolocate:t=>{console.log({onGeolocate:t});const{coords:l}=t;h({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[l.longitude,l.latitude]}}]}),window.DeviceOrientationEvent&&!z.current&&typeof DeviceOrientationEvent.requestPermission=="function"&&DeviceOrientationEvent.requestPermission().then(function(u){u==="granted"&&(console.log("granted"),z.current=!0)}).catch(u=>{})},onError:t=>{alert(`${t.code}: ${t.message}`)}}),n(B,{id:"walk-route",type:"geojson",data:s||G,children:n(R,y({id:"walk-route",type:"symbol"},k.walkRoute2))}),n(Q,{anchor:"bottom",draggable:!p,longitude:(a==null?void 0:a.lng)||0,latitude:(a==null?void 0:a.lat)||0,onDragEnd:t=>{const{lngLat:l}=t;E(l)},children:n("img",{src:M,width:"18",hidden:!a})})]})}),n("div",{id:"overview-map",ref:o,hidden:!0,children:O(U,{ref:r,mapboxAccessToken:I,mapStyle:"mapbox://styles/cheeaun/cl0ds1jbz003014px6nthvdle/draft",initialViewState:{center:[103.8198,1.3521],zoom:11},attributionControl:!1,interactive:!1,maxZoom:16,minZoom:14.5,children:[n(B,{id:"walk-route",type:"geojson",data:s||G,children:n(R,y({id:"walk-route",type:"symbol"},k.walkRoute2))}),O(B,{id:"geolocation",type:"geojson",data:g,children:[n(R,{id:"geolocation-outer",type:"circle",paint:{"circle-radius":12,"circle-color":"#1ea1f1","circle-opacity":.3}}),n(R,{id:"geolocation-inner",type:"circle",paint:{"circle-radius":3,"circle-color":"#1ea1f1","circle-stroke-width":2,"circle-stroke-color":"#fff"}})]}),n(Q,{anchor:"bottom",longitude:(a==null?void 0:a.lng)||0,latitude:(a==null?void 0:a.lat)||0,children:n("img",{src:M,width:"10",hidden:!a})})]})}),O("div",{id:"actions",class:f?"disabled":"",children:[f&&n("div",{class:"loading"}),a?O(N,{children:[n("button",{type:"button",onClick:()=>{E(null),S(!1)},title:"Remove marker",children:"\u274C"}),n("button",{type:"button",onClick:()=>{S(!p)},class:p?"":"faded",title:p?"Unpin marker":"Pin marker",children:"\u{1F4CC}"}),n("button",{type:"button",onClick:()=>{var t;(t=e.current)==null||t.flyTo({center:a})},title:"Fly to marker",children:"\u{1F50D}"}),n("button",{type:"button",onClick:async()=>{if(i(!0),console.log({geolocationGeoJSON:g,destinationMarker:a}),!g){alert("Please allow location access to generate routes");return}const t=await de(g.features[0].geometry.coordinates,[a.lng,a.lat]);m(t),i(!1),S(!0)},title:"Generate routes to marker",children:"\u{1F503}"})]}):!!s&&n("button",{type:"button",onClick:()=>{m(null)},title:"Clear route",children:"\u{1F5D1}\uFE0F"})]})]})}ae(n(fe,{}),document.getElementById("app"));
